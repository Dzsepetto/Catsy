<?xml version="1.0" encoding="utf-8"?>
<ContentView
    x:Class="Catsy.ShopView"
    x:Name="Root"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:Catsy.Features.Models">

    <Grid RowDefinitions="Auto,*">

        <Grid Grid.Row="0"
              Padding="12"
              ColumnDefinitions="Auto,*">
            <ImageButton x:Name="BackButton"
                         IsVisible="{Binding IsInCategory}"
                         Source="back_arrow.png"
                         BackgroundColor="Red"
                         HeightRequest="32"
                         WidthRequest="32"
                         Clicked="OnBackClicked"
                         HorizontalOptions="Start"
                         VerticalOptions="Center" />

            <Label Grid.Column="1"
                   Text="{Binding HeaderTitle}"
                   FontSize="20"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"/>
        </Grid>

        <Grid Grid.Row="1">
            <VerticalStackLayout IsVisible="{Binding IsCategoryMenu}"
                                 Spacing="24"
                                 HorizontalOptions="Center"
                                 VerticalOptions="Center">

                <Button Text="Background"
                        Padding="18,14"
                        CornerRadius="14"
                        Clicked="OnBackgroundClicked"
                        WidthRequest="240" />

                <Button Text="Accessories"
                        Padding="18,14"
                        CornerRadius="14"
                        Clicked="OnAccessoriesClicked"
                        WidthRequest="240" />

                <Button Text="Boosts"
                        Padding="18,14"
                        CornerRadius="14"
                        Clicked="OnBoostsClicked"
                        WidthRequest="240" />
            </VerticalStackLayout>


            <CollectionView IsVisible="{Binding IsInCategory}"
                            ItemsSource="{Binding Items}"
                            Margin="12"
                            HorizontalOptions="Fill"
                            VerticalOptions="Fill">

                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="14" />
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:ShopItem">
                        <Frame Padding="14"
                               CornerRadius="12"
                               BorderColor="Gray"
                               HasShadow="False">

                            <VerticalStackLayout Spacing="10"
                                                 HorizontalOptions="Center"
                                                 VerticalOptions="Center">

                                <Image Source="{Binding Icon}"
                                       WidthRequest="72"
                                       HeightRequest="72"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>

                                <Label Text="{Binding Name}"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       HorizontalTextAlignment="Center"/>

                                <Label Text="{Binding Price, StringFormat='Price: {0}'}"
                                       HorizontalTextAlignment="Center"/>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>
    </Grid>
</ContentView>